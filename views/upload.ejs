<!-- current mesh display -->
<div class="iu-row-wrapper iu-row-wrapper--full-width iu-row-wrapper--mv">
    <div class="iu-row">
        <div class="iu-content">
            <div class="iu-box iu-box--mesh-view">
                <model-viewer class="iu-mv" src="/uploads/<%= locals.selectedUpload.fileName %>" ar ar-modes="webxr scene-viewer quick-look" camera-controls shadow-intensity="1">
                    <div class="progress-bar hide" slot="progress-bar">
                        <div class="update-bar"></div>
                    </div>
                </model-viewer>
            </div>
            <div class="iu-box">
                <form id="edit-upload-form">
                    <label for="cur-upload-note"></label>
                    <textarea name="cur-upload-note" id="cur-upload-note" cols="30" rows="10"><%= locals.selectedUpload.note %></textarea>
                    <a id="btn--cur-note--edit"><i class="fa-regular fa-pen-to-square"></i></a>
                    <button data-id="<%= locals.selectedUpload.id %>" type="submit" id="btn--cur-note--submit"><i class="fa-solid fa-check"></i></button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="iu-row-wrapper">
    <div class="iu-row">
        <div class="iu-content">
            <div class="iu-box iu-box--title">
                <h2>Your Uploads, <%= locals.username %></h2>
            </div>
        </div>
    </div>
</div>

<!-- uploaded meshes -->
<div class="iu-row-wrapper">
    <div class="iu-row">
        <div class="iu-content">
            <div class="iu-box">
                <ul id="iu-um-list" class="iu-um-list">
                    <% for(const upload of locals.uploadlist) { %>
                        <div class="iu-um">
                            <a href="/uploads/<%= upload.id %>">View Mesh</a>
                            <div class="iu-um__color">
                                <!-- color indicator for user -->
                            </div>
                            <div class="iu-um__desc">
                                <h4 class="iu-um__title"><%= upload.originalFileName %></h4>
                                <div class="flex">
                                    <p><b>Note: </b></p><p class="iu-um__filename"><%= upload.note.substring(0,25) %> <% if(upload.note.length > 25) { %> <span>...</span> <% } %></p>
                                    <p><b>Upload date: </b></p><p class="iu-um__date"><%= upload.created %></p>
                                    <p><b>Filesize: </b></p><p class="iu-um__filename"><%= (upload.fileSize / 1000) - ((upload.fileSize / 1000) % 1) + ' KB'  %></p>
                                </div>
                            </div>
                            <div class="iu-um__del">
                                <a class="iu_um_delanchor" data-id="<%= upload.id %>"></a>
                                <i class="fa-solid fa-trash"></i>
                            </div>
                        </div>
                    <% } %>
                    <% if(locals.uploadlist.length == 0) { %>
                        <h4>you have not uploaded anything yet.</h4>
                    <% } %>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="iu-row-wrapper">
    <div class="iu-row">
        <div class="iu-content">
            <div class="iu-box">
                <div class="button">
                    <form id="file-upload-form">
                        <input type="text" name="upload-user" value="<%= locals.username %>" id="upload-user" readonly>
                        <label for="upload-note" class="">Note</label>
                        <textarea resize="none" name="upload-note" id="upload-note"></textarea>
                        <label for="upload-files" class="file-upload-custom-styling">Select Files</label>
                        <input type="file" name="upload-file" id="upload-files" multiple>
                        <button type="submit" id="upload-submit"><i class="fa-solid fa-check"></i></button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
